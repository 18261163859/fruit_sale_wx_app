<!--pages/ship-orders/ship-orders.wxml-->
<view class="container">
  <!-- è®¢å•åˆ—è¡¨ -->
  <scroll-view class="order-list" scroll-y enable-back-to-top refresher-enabled refresher-triggered="{{loading}}" bindrefresherrefresh="onPullDownRefresh">
    <view wx:if="{{orders.length > 0}}">
      <view
        wx:for="{{orders}}"
        wx:key="id"
        class="order-card"
        bindtap="goToShipDetail"
        data-id="{{item.id}}"
      >
        <!-- è®¢å•å¤´éƒ¨ -->
        <view class="order-header">
          <text class="order-no">è®¢å•å·: {{item.orderNo}}</text>
          <text class="order-time">{{item.createTime}}</text>
        </view>

        <!-- æ”¶è´§äººä¿¡æ¯ -->
        <view class="receiver-section">
          <view class="receiver-icon">ğŸ“</view>
          <view class="receiver-info">
            <view class="receiver-row">
              <text class="receiver-name">{{item.receiverName}}</text>
              <text class="receiver-phone">{{item.receiverPhone}}</text>
            </view>
            <view class="receiver-address">
              {{item.receiverProvince}} {{item.receiverCity}} {{item.receiverDistrict}} {{item.receiverAddress}}
            </view>
          </view>
        </view>

        <!-- å•†å“åˆ—è¡¨ -->
        <view class="products-section">
          <view
            wx:for="{{item.items}}"
            wx:for-item="product"
            wx:key="id"
            class="product-item"
          >
            <image class="product-image" src="{{product.productImage}}" mode="aspectFill" />
            <view class="product-info">
              <text class="product-name">{{product.productName}}</text>
              <text class="product-spec" wx:if="{{product.specName}}">{{product.specName}}</text>
              <view class="quantity-row">
                <text class="price">Â¥{{product.productPrice}}</text>
                <text class="quantity">x{{product.quantity}}</text>
              </view>
            </view>
          </view>
        </view>

        <!-- è®¢å•åº•éƒ¨ -->
        <view class="order-footer">
          <view class="amount-section">
            <text class="amount-label">è®¢å•é‡‘é¢:</text>
            <text class="amount-value">Â¥{{item.actualAmount}}</text>
          </view>
          <button class="ship-btn" catchtap="goToShipDetail" data-id="{{item.id}}">
            å»å‘è´§
          </button>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:else class="empty-state">
      <image class="empty-icon" src="/images/empty-order.png" mode="aspectFit" />
      <text class="empty-text">æš‚æ— å¾…å‘è´§è®¢å•</text>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading-state">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <!-- æ²¡æœ‰æ›´å¤š -->
    <view wx:if="{{!hasMore && orders.length > 0}}" class="no-more">
      <text>æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
  </scroll-view>
</view>

<!--pages/shipping-list/shipping-list.wxml-->
<view class="container">
  <!-- Tab åˆ‡æ¢ -->
  <view class="tabs">
    <view class="tab-item {{activeTab === 'pending' ? 'active' : ''}}" bindtap="switchTab" data-tab="pending">
      å¾…å‘è´§
    </view>
    <view class="tab-item {{activeTab === 'shipped' ? 'active' : ''}}" bindtap="switchTab" data-tab="shipped">
      å·²å‘è´§
    </view>
  </view>

  <!-- å¾…å‘è´§åˆ—è¡¨ -->
  <view class="order-list" wx:if="{{activeTab === 'pending'}}">
    <block wx:if="{{pendingList.length > 0}}">
      <view class="order-item" wx:for="{{pendingList}}" wx:key="id">
        <view class="order-header">
          <text class="order-no">è®¢å•å·ï¼š{{item.orderNo}}</text>
          <text class="order-status pending">å¾…å‘è´§</text>
        </view>

        <view class="address-section">
          <view class="address-icon">ğŸ“</view>
          <view class="address-content">
            <view class="receiver-row">
              <text class="receiver-name">{{item.receiverName}}</text>
              <text class="receiver-phone">{{item.receiverPhone}}</text>
            </view>
            <text class="address-text">{{item.receiverAddress}}</text>
          </view>
        </view>

        <view class="product-list">
          <view class="product-item" wx:for="{{item.items}}" wx:key="id" wx:for-item="product">
            <image class="product-image" src="{{product.productImage}}" mode="aspectFill"></image>
            <view class="product-info">
              <text class="product-name">{{product.productName}}</text>
              <text class="product-spec" wx:if="{{product.specName}}">{{product.specName}}</text>
              <view class="product-footer">
                <text class="product-price">Â¥{{product.productPrice}}</text>
                <text class="product-quantity">x{{product.quantity}}</text>
              </view>
            </view>
          </view>
        </view>

        <view class="order-footer">
          <view class="order-info">
            <text class="order-time">ä¸‹å•æ—¶é—´ï¼š{{item.createTime}}</text>
            <text class="order-amount">è®¢å•é‡‘é¢ï¼šÂ¥{{item.totalAmount}}</text>
          </view>
          <button class="ship-btn" bindtap="goToShip" data-id="{{item.id}}">å»å‘è´§</button>
        </view>
      </view>
    </block>

    <view class="empty-state" wx:else>
      <view class="empty-icon">ğŸ“¦</view>
      <text class="empty-text">æš‚æ— å¾…å‘è´§è®¢å•</text>
    </view>
  </view>

  <!-- å·²å‘è´§åˆ—è¡¨ -->
  <view class="order-list" wx:if="{{activeTab === 'shipped'}}">
    <block wx:if="{{shippedList.length > 0}}">
      <view class="order-item" wx:for="{{shippedList}}" wx:key="id">
        <view class="order-header">
          <text class="order-no">è®¢å•å·ï¼š{{item.orderNo}}</text>
          <text class="order-status shipped">å·²å‘è´§</text>
        </view>

        <view class="address-section">
          <view class="address-icon">ğŸ“</view>
          <view class="address-content">
            <view class="receiver-row">
              <text class="receiver-name">{{item.receiverName}}</text>
              <text class="receiver-phone">{{item.receiverPhone}}</text>
            </view>
            <text class="address-text">{{item.receiverAddress}}</text>
          </view>
        </view>

        <view class="logistics-info" wx:if="{{item.logistics}}">
          <view class="logistics-row">
            <text class="logistics-label">å¿«é€’å…¬å¸ï¼š</text>
            <text class="logistics-value">{{item.logistics.logisticsCompany}}</text>
          </view>
          <view class="logistics-row">
            <text class="logistics-label">å¿«é€’å•å·ï¼š</text>
            <text class="logistics-value">{{item.logistics.trackingNumber}}</text>
          </view>
        </view>

        <view class="product-list">
          <view class="product-item" wx:for="{{item.items}}" wx:key="id" wx:for-item="product">
            <image class="product-image" src="{{product.productImage}}" mode="aspectFill"></image>
            <view class="product-info">
              <text class="product-name">{{product.productName}}</text>
              <text class="product-spec" wx:if="{{product.specName}}">{{product.specName}}</text>
              <view class="product-footer">
                <text class="product-price">Â¥{{product.productPrice}}</text>
                <text class="product-quantity">x{{product.quantity}}</text>
              </view>
            </view>
          </view>
        </view>

        <view class="order-footer">
          <view class="order-info">
            <text class="order-time">å‘è´§æ—¶é—´ï¼š{{item.updateTime}}</text>
            <text class="order-amount">è®¢å•é‡‘é¢ï¼šÂ¥{{item.totalAmount}}</text>
          </view>
          <button class="detail-btn" bindtap="goToDetail" data-id="{{item.id}}">æŸ¥çœ‹è¯¦æƒ…</button>
        </view>
      </view>
    </block>

    <view class="empty-state" wx:else>
      <view class="empty-icon">ğŸ“¦</view>
      <text class="empty-text">æš‚æ— å·²å‘è´§è®¢å•</text>
    </view>
  </view>
</view>
